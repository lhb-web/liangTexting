<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>WebSocket_index1</title>
		<script src="jquery-2.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		
		<div id="xxxxx"  style="width: 400px;height: 300px;border: 2px solid aqua;">
			
		</div>
		
		<input type="text" name="" id="input1" value="" />
		<input type="button" name="" id="bt1" value="提交" />
	</body>
</html>
<script type="text/javascript">
	var ws = new WebSocket('ws://127.0.0.1:3000?name=梁鸿标&passCode=3344');//连接

	ws.onopen = function() {
		console.log('index1 ------连接');
	};
	ws.onmessage = function(mess) {
		console.log(mess.data);
		$("#xxxxx")[0].innerText += mess.data;
		$("#input1").val("");
	};

	// setTimeout(function() {
	// 	ws.send("{to:'server',mes:'我是index1111'}")
	// }, 2000);
	
	$("#bt1").click(function(){
		var messText = $("#input1").val();
		if(!messText){
			alert("消息内容不能为空");
			return;
		}
		ws.send(messText);
	});
	
</script>
